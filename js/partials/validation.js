"use strict";$(document).ready(function(){var e={ignore:'.ignore, [type="hidden"]'};$.validator.setDefaults({debug:!0}),$.extend($.validator.messages,{required:"Это обязательное поле",email:"Неверный формат данных",tel:"Неверный формат данных",date:"Пожалуйста, введите корректную дату.",number:"Пожалуйста, введите число.",equalTo:"Пароли не совпадают"}),$.validator.addMethod("max-length",function(e,t,a){return e.length<=a},"Введите не более 140 символов"),$.validator.addMethod("js-regex",function(e,t){return this.optional(t)||/^[a-zA-Zа-яА-ЯЁё ]+$/.test(e)},"Только буквы"),$.validator.addMethod("js-tel-input",function(e,t){var a=e.split(" ").join("").split("+").join("");return this.optional(t)||11==a.length},"Введите номер");var t;$.validator.addMethod("js-remote-email",function(e,t){var a=!1;return $.ajax({url:$("[data-remote-email]").data("remote-email"),data:{value:e},async:!1,success:function(e){a=e}}),a},"E-mail уже занят"),$.validator.addMethod("js-remote-phone",function(e,t){var a=!1;return $.ajax({url:$(t).data("remote-phone"),data:{value:e},async:!1,success:function(e){a=e}}),a},"Телефон уже занят"),$.validator.addMethod("max-message",function(e,t){return this.optional(t)||/(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#$%^&*]{6,}/i.test(e)},"Пароль должен содержать не менее 6 символов, в том числе цифры и буквы латинского алфавита"),$.validator.addMethod("js-remote-subscribe",function(e,t){var a=!1;return $.ajax({url:$(t).data("remote-subscribe"),data:{value:e},async:!1,success:function(e){a=e}}),a},"Данный E-mail уже участвует в рассылке"),$.validator.addMethod("filereqired",function(e,t,a){return"file"===$(t).attr("type")&&t.files&&t.files.length},"Файл не добавлен"),$.validator.addMethod("extension",function(e,t,a){if(a="string"==typeof a?a.replace(/,/g,"|"):"png|jpe?g|gif","file"===$(t).attr("type")&&t.files&&t.files.length)for(var n=0;n<t.files.length;n++)return this.optional(t)||t.files[n].name.match(new RegExp("\\.("+a+")$","i"));return!0},$.validator.format("")),$.validator.addMethod("maxsize",function(e,t,a){if(this.optional(t))return!0;if(a=1024*a,"file"===$(t).attr("type")&&t.files&&t.files.length)for(var n=0;n<t.files.length;n++)return t.files[n].size<=a;return!0},""),$.validator.addMethod("enter-email",function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)||/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/.test(e)},"Неверный формат данных"),$("body").on("initValidation",function(){$(".js-form-validate").each(function(){var a=$(this),n={},o=$.extend(n,e);a.data("error-selector")&&(o.errorLabelContainer=a.data("error-selector"));var r=a.validate(o),i=a.find("input.js-remote-subscribe, input.js-remote-user, input.js-remote-phone, input.js-remote-email input.js-tel-input");i.on("keydown",function(){var e=$(this);e.addClass("ignore")}).on("keyup",function(){clearTimeout(t);var e=this;t=setTimeout(function(){i.removeClass("ignore"),r.element(e)},1e3)}),a.find(".js-drop-zone").length&&$("body").on("dragChangeValid",function(){r.element(a.find(".js-drop-zone").find("input"))}),a.on("reset",function(e){r.resetForm()}),a.on("submit",function(e){if(r.numberOfInvalids()>0)e.stopImmediatePropagation(),a.addClass("error");else{var t=a,n=t.attr("action")||location.href,o=t.attr("method"),e=t.data("event"),i=new FormData(a[0]);t.hasClass("js-resume-form")&&($(".b-page-wrapper").addClass("no-scroll no-touch"),$(".b-popup[data-popup='resumeSuccess'").addClass("open"),$(".b-popup[data-popup='resumeSuccess'").css("display","flex").hide().fadeIn(300),t.find(".js-drop-zone").find("input").val(""),t.find(".drop-zone-file").remove(),t.find(".js-drop-zone-message").hasClass("hidden")&&t.find(".js-drop-zone-message").removeClass("hidden")),t.hasClass("js-feedback-form")&&($(".js-feedback-form").hide(),$(".js-feedback-success").css("display","flex").hide().fadeIn(300)),a.removeClass("error"),$.ajax({url:n,method:o,processData:!1,contentType:!1,data:i,success:function(){var e=$("div[data-popup~='success']");e.addClass("open"),a[0].reset(),a.attr("data-link")&&(window.location.href=a.attr("data-link"))},error:function(){var e=$("div[data-popup~='error']");e.addClass("open"),a[0].reset()}})}}),$(".js-select").on("select2:select",function(){r.element(this)})})}),$("body").trigger("initValidation")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnRpYWxzL3ZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJTRVRUSU5HUyIsImlnbm9yZSIsInZhbGlkYXRvciIsInNldERlZmF1bHRzIiwiZGVidWciLCJleHRlbmQiLCJtZXNzYWdlcyIsInJlcXVpcmVkIiwiZW1haWwiLCJ0ZWwiLCJkYXRlIiwibnVtYmVyIiwiZXF1YWxUbyIsImFkZE1ldGhvZCIsInZhbHVlIiwiZWxlbWVudCIsInBhcmFtcyIsImxlbmd0aCIsInRoaXMiLCJvcHRpb25hbCIsInRlc3QiLCJ2YWwiLCJzcGxpdCIsImpvaW4iLCJjaGVja2luZyIsImlzU3VjY2VzcyIsImFqYXgiLCJ1cmwiLCJkYXRhIiwiYXN5bmMiLCJzdWNjZXNzIiwibXNnIiwiYXR0ciIsImZpbGVzIiwicGFyYW0iLCJyZXBsYWNlIiwiaSIsIm5hbWUiLCJtYXRjaCIsIlJlZ0V4cCIsImZvcm1hdCIsInNpemUiLCJvbiIsImVhY2giLCIkdGhpcyIsImxvY2FsU2V0dGluZ3MiLCJzZXR0aW5ncyIsImVycm9yTGFiZWxDb250YWluZXIiLCJ2YWxpZGF0ZSIsIiRyZW1vdGUiLCJmaW5kIiwiYWRkQ2xhc3MiLCJjbGVhclRpbWVvdXQiLCJfdGhpcyIsInNldFRpbWVvdXQiLCJyZW1vdmVDbGFzcyIsImV2ZW50IiwicmVzZXRGb3JtIiwibnVtYmVyT2ZJbnZhbGlkcyIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsIiRmb3JtIiwibG9jYXRpb24iLCJocmVmIiwibWV0aG9kIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImhhc0NsYXNzIiwiY3NzIiwiaGlkZSIsImZhZGVJbiIsInJlbW92ZSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJwb3B1cCIsInJlc2V0Iiwid2luZG93IiwiZXJyb3IiLCJ0cmlnZ2VyIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUVBQSxHQUFFQyxVQUFVQyxNQUFNLFdBQ2hCLEdBQUlDLElBQ0ZDLE9B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QVNDLEtBQ3ZDQyxFQUFTSCxFQUFNNUIsS0FBSyxVQUNwQndCLEVBQVFJLEVBQU1oQyxLQUFLLFNBQ25Cb0MsRUFBVyxHQUFJQyxVQUFTckIsRUFBTSxHQUU5QmdCLEdBQU1NLFNBQVMsb0JBQ2pCckUsRUFBRSxtQkFBbUJzRCxTQUFTLHNCQUM5QnRELEVBQUUsdUNBQXlDc0QsU0FBUyxRQUNwRHRELEVBQUUsdUNBQXlDc0UsSUFBSSxVQUFXLFFBQVFDLE9BQU9DLE9BQU8sS0FDaEZULEVBQU1WLEtBQUssaUJBQWlCQSxLQUFLLFNBQVM3QixJQUFJLElBQzlDdUMsRUFBTVYsS0FBSyxtQkFBbUJvQixTQUUxQlYsRUFBTVYsS0FBSyx5QkFBeUJnQixTQUFTLFdBQy9DTixFQUFNVixLQUFLLHlCQUF5QkssWUFBWSxXQUloREssRUFBTU0sU0FBUyxzQkFDakJyRSxFQUFFLHFCQUFxQnVFLE9BQ3ZCdkUsRUFBRSx3QkFBd0JzRSxJQUFJLFVBQVcsUUFBUUMsT0FBT0MsT0FBTyxNQUdqRXpCLEVBQU1XLFlBQVksU0FDbEIxRCxFQUFFNkIsTUFDQUMsSUFBS0EsRUFDTG9DLE9BQVFBLEVBQ1JRLGFBQWEsRUFDYkMsYUFBYSxFQUNiNUMsS0FBTW9DLEVBQ05sQyxRQUFTLFdBQ1AsR0FBSTJDLEdBQVE1RSxFQUFFLDZCQUNkNEUsR0FBTXRCLFNBQVMsUUFDZlAsRUFBTSxHQUFHOEIsUUFFTDlCLEVBQU1aLEtBQUssZUFDYjJDLE9BQU9kLFNBQVNDLEtBQU9sQixFQUFNWixLQUFLLGVBR3RDNEMsTUFBTyxXQUNMLEdBQUlILEdBQVE1RSxFQUFFLDJCQUNkNEUsR0FBTXRCLFNBQVMsUUFDZlAsRUFBTSxHQUFHOEIsY0FLakI3RSxFQUFFLGNBQWM2QyxHQUFHLGlCQUFrQixXQUNuQ3hDLEVBQVVhLFFBQVFHLFlBSXhCckIsRUFBRSxRQUFRZ0YsUUFBUSIsImZpbGUiOiJwYXJ0aWFscy92YWxpZGF0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgdmFyIFNFVFRJTkdTID0ge1xuICAgIGlnbm9yZTogJy5pZ25vcmUsIFt0eXBlPVwiaGlkZGVuXCJdJ1xuICB9O1xuICAkLnZhbGlkYXRvci5zZXREZWZhdWx0cyh7XG4gICAgZGVidWc6IHRydWVcbiAgfSk7XG4gICQuZXh0ZW5kKCQudmFsaWRhdG9yLm1lc3NhZ2VzLCB7XG4gICAgcmVxdWlyZWQ6IFwi0K3RgtC+INC+0LHRj9C30LDRgtC10LvRjNC90L7QtSDQv9C+0LvQtVwiLFxuICAgIGVtYWlsOiBcItCd0LXQstC10YDQvdGL0Lkg0YTQvtGA0LzQsNGCINC00LDQvdC90YvRhVwiLFxuICAgIHRlbDogXCLQndC10LLQtdGA0L3Ri9C5INGE0L7RgNC80LDRgiDQtNCw0L3QvdGL0YVcIixcbiAgICAvLyB1cmw6ICfQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0LrQvtGA0YDQtdC60YLQvdGL0LkgVVJMLicsXG4gICAgZGF0ZTogXCLQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0LrQvtGA0YDQtdC60YLQvdGD0Y4g0LTQsNGC0YMuXCIsXG4gICAgbnVtYmVyOiBcItCf0L7QttCw0LvRg9C50YHRgtCwLCDQstCy0LXQtNC40YLQtSDRh9C40YHQu9C+LlwiLFxuICAgIC8vIGRpZ2l0czogJ9Cf0L7QttCw0LvRg9C50YHRgtCwLCDQstCy0L7QtNC40YLQtSDRgtC+0LvRjNC60L4g0YbQuNGE0YDRiy4nLFxuICAgIC8vIGNyZWRpdGNhcmQ6ICfQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0L/RgNCw0LLQuNC70YzQvdGL0Lkg0L3QvtC80LXRgCDQutGA0LXQtNC40YLQvdC+0Lkg0LrQsNGA0YLRiy4nLFxuICAgIGVxdWFsVG86IFwi0J/QsNGA0L7Qu9C4INC90LUg0YHQvtCy0L/QsNC00LDRjtGCXCIgLy9tYXhsZW5ndGg6ICQudmFsaWRhdG9yLmZvcm1hdCgn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1INC90LUg0LHQvtC70YzRiNC1IHswfSDRgdC40LzQstC+0LvQvtCyLicpLFxuICAgIC8vIG1pbmxlbmd0aDogJC52YWxpZGF0b3IuZm9ybWF0KCfQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0L3QtSDQvNC10L3RjNGI0LUgezB9INGB0LjQvNCy0L7Qu9C+0LIuJyksXG4gICAgLy8gcmFuZ2VsZW5ndGg6ICQudmFsaWRhdG9yLmZvcm1hdCgn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1INC30L3QsNGH0LXQvdC40LUg0LTQu9C40L3QvtC5INC+0YIgezB9INC00L4gezF9INGB0LjQvNCy0L7Qu9C+0LIuJyksXG4gICAgLy8gcmFuZ2U6ICQudmFsaWRhdG9yLmZvcm1hdCgn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1INGH0LjRgdC70L4g0L7RgiB7MH0g0LTQviB7MX0uJyksXG4gICAgLy8gbWF4OiAkLnZhbGlkYXRvci5mb3JtYXQoJ9Cf0L7QttCw0LvRg9C50YHRgtCwLCDQstCy0LXQtNC40YLQtSDRh9C40YHQu9C+LCDQvNC10L3RjNGI0LXQtSDQuNC70Lgg0YDQsNCy0L3QvtC1IHswfS4nKSxcbiAgICAvLyBtaW46ICQudmFsaWRhdG9yLmZvcm1hdCgn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1INGH0LjRgdC70L4sINCx0L7Qu9GM0YjQtdC1INC40LvQuCDRgNCw0LLQvdC+0LUgezB9LicpXG5cbiAgfSk7XG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcIm1heC1sZW5ndGhcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gdmFsdWUubGVuZ3RoIDw9IHBhcmFtcztcbiAgfSwgXCLQktCy0LXQtNC40YLQtSDQvdC1INCx0L7Qu9C10LUgMTQwINGB0LjQvNCy0L7Qu9C+0LJcIik7XG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcImpzLXJlZ2V4XCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IC9eW2EtekEtWtCwLdGP0JAt0K/QgdGRIF0rJC8udGVzdCh2YWx1ZSk7XG4gIH0sIFwi0KLQvtC70YzQutC+INCx0YPQutCy0YtcIik7XG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcImpzLXRlbC1pbnB1dFwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICB2YXIgdmFsID0gdmFsdWUuc3BsaXQoXCIgXCIpLmpvaW4oXCJcIikuc3BsaXQoXCIrXCIpLmpvaW4oXCJcIik7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgdmFsLmxlbmd0aCA9PSAxMTtcbiAgfSwgXCLQktCy0LXQtNC40YLQtSDQvdC+0LzQtdGAXCIpO1xuICB2YXIgY2hlY2tpbmc7XG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcImpzLXJlbW90ZS1lbWFpbFwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICB2YXIgaXNTdWNjZXNzID0gZmFsc2U7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJChcIltkYXRhLXJlbW90ZS1lbWFpbF1cIikuZGF0YShcInJlbW90ZS1lbWFpbFwiKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICB9LFxuICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2Vzcyhtc2cpIHtcbiAgICAgICAgaXNTdWNjZXNzID0gbXNnO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpc1N1Y2Nlc3M7XG4gIH0sIFwiRS1tYWlsINGD0LbQtSDQt9Cw0L3Rj9GCXCIpO1xuICAkLnZhbGlkYXRvci5hZGRNZXRob2QoXCJqcy1yZW1vdGUtcGhvbmVcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgdmFyIGlzU3VjY2VzcyA9IGZhbHNlO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICQoZWxlbWVudCkuZGF0YShcInJlbW90ZS1waG9uZVwiKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICB9LFxuICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2Vzcyhtc2cpIHtcbiAgICAgICAgaXNTdWNjZXNzID0gbXNnO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpc1N1Y2Nlc3M7XG4gIH0sIFwi0KLQtdC70LXRhNC+0L0g0YPQttC1INC30LDQvdGP0YJcIik7XG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcIm1heC1tZXNzYWdlXCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IC8oPz0uKlswLTldKSg/PS4qW2Etel0pKD89LipbQS1aXSlbMC05YS16QS1aIUAjJCVeJipdezYsfS9pLnRlc3QodmFsdWUpO1xuICB9LCBcItCf0LDRgNC+0LvRjCDQtNC+0LvQttC10L0g0YHQvtC00LXRgNC20LDRgtGMINC90LUg0LzQtdC90LXQtSA2INGB0LjQvNCy0L7Qu9C+0LIsINCyINGC0L7QvCDRh9C40YHQu9C1INGG0LjRhNGA0Ysg0Lgg0LHRg9C60LLRiyDQu9Cw0YLQuNC90YHQutC+0LPQviDQsNC70YTQsNCy0LjRgtCwXCIpO1xuICAkLnZhbGlkYXRvci5hZGRNZXRob2QoXCJqcy1yZW1vdGUtc3Vic2NyaWJlXCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgIHZhciBpc1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAkKGVsZW1lbnQpLmRhdGEoXCJyZW1vdGUtc3Vic2NyaWJlXCIpLFxuICAgICAgZGF0YToge1xuICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgIH0sXG4gICAgICBhc3luYzogZmFsc2UsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKG1zZykge1xuICAgICAgICBpc1N1Y2Nlc3MgPSBtc2c7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGlzU3VjY2VzcztcbiAgfSwgXCLQlNCw0L3QvdGL0LkgRS1tYWlsINGD0LbQtSDRg9GH0LDRgdGC0LLRg9C10YIg0LIg0YDQsNGB0YHRi9C70LrQtVwiKTtcbiAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwiZmlsZXJlcWlyZWRcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gJChlbGVtZW50KS5hdHRyKFwidHlwZVwiKSA9PT0gXCJmaWxlXCIgJiYgZWxlbWVudC5maWxlcyAmJiBlbGVtZW50LmZpbGVzLmxlbmd0aDtcbiAgfSwgXCLQpNCw0LnQuyDQvdC1INC00L7QsdCw0LLQu9C10L1cIik7XG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcImV4dGVuc2lvblwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQsIHBhcmFtKSB7XG4gICAgcGFyYW0gPSB0eXBlb2YgcGFyYW0gPT09IFwic3RyaW5nXCIgPyBwYXJhbS5yZXBsYWNlKC8sL2csIFwifFwiKSA6IFwicG5nfGpwZT9nfGdpZlwiO1xuXG4gICAgaWYgKCQoZWxlbWVudCkuYXR0cihcInR5cGVcIikgPT09IFwiZmlsZVwiICYmIGVsZW1lbnQuZmlsZXMgJiYgZWxlbWVudC5maWxlcy5sZW5ndGgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5maWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25hbChlbGVtZW50KSB8fCBlbGVtZW50LmZpbGVzW2ldLm5hbWUubWF0Y2gobmV3IFJlZ0V4cChcIlxcXFwuKFwiICsgcGFyYW0gKyBcIikkXCIsIFwiaVwiKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH0sICQudmFsaWRhdG9yLmZvcm1hdChcIlwiKSk7XG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcIm1heHNpemVcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50LCBwYXJhbSkge1xuICAgIGlmICh0aGlzLm9wdGlvbmFsKGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwYXJhbSA9IHBhcmFtICogMTAyNDtcblxuICAgIGlmICgkKGVsZW1lbnQpLmF0dHIoXCJ0eXBlXCIpID09PSBcImZpbGVcIiAmJiBlbGVtZW50LmZpbGVzICYmIGVsZW1lbnQuZmlsZXMubGVuZ3RoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQuZmlsZXNbaV0uc2l6ZSA8PSBwYXJhbTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSwgXCJcIik7XG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcImVudGVyLWVtYWlsXCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IC9eW2EtekEtWjAtOS4hIyQlJicqK1xcLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvLnRlc3QodmFsdWUpIHx8IC9eKFxcKzd8N3w4KT9bXFxzXFwtXT9cXCg/WzQ4OV1bMC05XXsyfVxcKT9bXFxzXFwtXT9bMC05XXszfVtcXHNcXC1dP1swLTldezJ9W1xcc1xcLV0/WzAtOV17Mn0kLy50ZXN0KHZhbHVlKTtcbiAgfSwgXCLQndC10LLQtdGA0L3Ri9C5INGE0L7RgNC80LDRgiDQtNCw0L3QvdGL0YVcIik7XG4gICQoXCJib2R5XCIpLm9uKFwiaW5pdFZhbGlkYXRpb25cIiwgZnVuY3Rpb24gKCkge1xuICAgICQoXCIuanMtZm9ybS12YWxpZGF0ZVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICB2YXIgbG9jYWxTZXR0aW5ncyA9IHt9O1xuICAgICAgdmFyIHNldHRpbmdzID0gJC5leHRlbmQobG9jYWxTZXR0aW5ncywgU0VUVElOR1MpO1xuXG4gICAgICBpZiAoJHRoaXMuZGF0YShcImVycm9yLXNlbGVjdG9yXCIpKSB7XG4gICAgICAgIHNldHRpbmdzLmVycm9yTGFiZWxDb250YWluZXIgPSAkdGhpcy5kYXRhKFwiZXJyb3Itc2VsZWN0b3JcIik7XG4gICAgICB9XG5cbiAgICAgIHZhciB2YWxpZGF0b3IgPSAkdGhpcy52YWxpZGF0ZShzZXR0aW5ncyk7XG4gICAgICB2YXIgJHJlbW90ZSA9ICR0aGlzLmZpbmQoXCJpbnB1dC5qcy1yZW1vdGUtc3Vic2NyaWJlLCBpbnB1dC5qcy1yZW1vdGUtdXNlciwgaW5wdXQuanMtcmVtb3RlLXBob25lLCBpbnB1dC5qcy1yZW1vdGUtZW1haWwgaW5wdXQuanMtdGVsLWlucHV0XCIpO1xuICAgICAgJHJlbW90ZS5vbihcImtleWRvd25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAkdGhpcy5hZGRDbGFzcyhcImlnbm9yZVwiKTtcbiAgICAgIH0pLm9uKFwia2V5dXBcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoY2hlY2tpbmcpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgY2hlY2tpbmcgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkcmVtb3RlLnJlbW92ZUNsYXNzKFwiaWdub3JlXCIpO1xuICAgICAgICAgIHZhbGlkYXRvci5lbGVtZW50KF90aGlzKTtcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCR0aGlzLmZpbmQoJy5qcy1kcm9wLXpvbmUnKS5sZW5ndGgpIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdkcmFnQ2hhbmdlVmFsaWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFsaWRhdG9yLmVsZW1lbnQoJHRoaXMuZmluZCgnLmpzLWRyb3Atem9uZScpLmZpbmQoJ2lucHV0JykpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgJHRoaXMub24oXCJyZXNldFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFsaWRhdG9yLnJlc2V0Rm9ybSgpO1xuICAgICAgfSk7XG4gICAgICAkdGhpcy5vbihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHZhbGlkYXRvci5udW1iZXJPZkludmFsaWRzKCkgPiAwKSB7XG4gICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2Vycm9yJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyICRmb3JtID0gJHRoaXM7XG4gICAgICAgICAgdmFyIHVybCA9ICRmb3JtLmF0dHIoXCJhY3Rpb25cIikgfHwgbG9jYXRpb24uaHJlZjtcbiAgICAgICAgICB2YXIgbWV0aG9kID0gJGZvcm0uYXR0cihcIm1ldGhvZFwiKTtcbiAgICAgICAgICB2YXIgZXZlbnQgPSAkZm9ybS5kYXRhKFwiZXZlbnRcIik7XG4gICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCR0aGlzWzBdKTtcblxuICAgICAgICAgIGlmICgkZm9ybS5oYXNDbGFzcygnanMtcmVzdW1lLWZvcm0nKSkge1xuICAgICAgICAgICAgJCgnLmItcGFnZS13cmFwcGVyJykuYWRkQ2xhc3MoJ25vLXNjcm9sbCBuby10b3VjaCcpO1xuICAgICAgICAgICAgJCgnLmItcG9wdXBbZGF0YS1wb3B1cD1cXCdyZXN1bWVTdWNjZXNzXFwnJykuYWRkQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgICQoJy5iLXBvcHVwW2RhdGEtcG9wdXA9XFwncmVzdW1lU3VjY2Vzc1xcJycpLmNzcygnZGlzcGxheScsICdmbGV4JykuaGlkZSgpLmZhZGVJbigzMDApO1xuICAgICAgICAgICAgJGZvcm0uZmluZCgnLmpzLWRyb3Atem9uZScpLmZpbmQoJ2lucHV0JykudmFsKCcnKTtcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJy5kcm9wLXpvbmUtZmlsZScpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICBpZiAoJGZvcm0uZmluZCgnLmpzLWRyb3Atem9uZS1tZXNzYWdlJykuaGFzQ2xhc3MoJ2hpZGRlbicpKSB7XG4gICAgICAgICAgICAgICRmb3JtLmZpbmQoJy5qcy1kcm9wLXpvbmUtbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoJGZvcm0uaGFzQ2xhc3MoJ2pzLWZlZWRiYWNrLWZvcm0nKSkge1xuICAgICAgICAgICAgJCgnLmpzLWZlZWRiYWNrLWZvcm0nKS5oaWRlKCk7XG4gICAgICAgICAgICAkKCcuanMtZmVlZGJhY2stc3VjY2VzcycpLmNzcygnZGlzcGxheScsICdmbGV4JykuaGlkZSgpLmZhZGVJbigzMDApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IGZhbHNlLFxuICAgICAgICAgICAgZGF0YTogZm9ybURhdGEsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKCkge1xuICAgICAgICAgICAgICB2YXIgcG9wdXAgPSAkKFwiZGl2W2RhdGEtcG9wdXB+PSdzdWNjZXNzJ11cIik7XG4gICAgICAgICAgICAgIHBvcHVwLmFkZENsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICAgICR0aGlzWzBdLnJlc2V0KCk7XG5cbiAgICAgICAgICAgICAgaWYgKCR0aGlzLmF0dHIoJ2RhdGEtbGluaycpKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAkdGhpcy5hdHRyKCdkYXRhLWxpbmsnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcigpIHtcbiAgICAgICAgICAgICAgdmFyIHBvcHVwID0gJChcImRpdltkYXRhLXBvcHVwfj0nZXJyb3InXVwiKTtcbiAgICAgICAgICAgICAgcG9wdXAuYWRkQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgICAgJHRoaXNbMF0ucmVzZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAkKCcuanMtc2VsZWN0Jykub24oJ3NlbGVjdDI6c2VsZWN0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YWxpZGF0b3IuZWxlbWVudCh0aGlzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgJChcImJvZHlcIikudHJpZ2dlcihcImluaXRWYWxpZGF0aW9uXCIpO1xufSk7Il19
